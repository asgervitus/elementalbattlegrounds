<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elemental Battlegrounds - System Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
    .success { color: green; }
    .error { color: red; }
    .warning { color: orange; }
    .launch-btn { 
      display: inline-block; 
      padding: 15px 30px; 
      background: #007bff; 
      color: white; 
      text-decoration: none; 
      border-radius: 5px; 
      font-size: 18px; 
      margin: 20px 0;
    }
    .launch-btn:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>üéÆ Elemental Battlegrounds - System Test</h1>
  
  <div id="test-results"></div>
  
  <a href="game.html" class="launch-btn">üöÄ Launch Game</a>
  
  <script type="module">
    const results = document.getElementById('test-results');
    
    async function runTests() {
      const tests = [];
      
      // Test 1: Import modules
      try {
        const { NEW_UNIT_DEFINITIONS, FUSION_MAP, BASE_TIER1_UNITS } = await import('./units.js');
        const { AbilitySystem } = await import('./abilities.js');
        const { FusionSystem } = await import('./fusions.js');
        
        tests.push('<div class="test-section"><h3>‚úÖ Module Import Test</h3><p>All modules imported successfully</p></div>');
        
        // Test 2: Check unit definitions
        if (Object.keys(NEW_UNIT_DEFINITIONS).length > 0) {
          tests.push(`<div class="test-section"><h3>‚úÖ Unit Definitions</h3><p>Loaded ${Object.keys(NEW_UNIT_DEFINITIONS).length} units</p></div>`);
        } else {
          tests.push('<div class="test-section"><h3>‚ùå Unit Definitions</h3><p>No unit definitions found</p></div>');
        }
        
        // Test 3: Check fusion map
        if (Object.keys(FUSION_MAP).length > 0) {
          tests.push(`<div class="test-section"><h3>‚úÖ Fusion System</h3><p>Loaded ${Object.keys(FUSION_MAP).length} fusion combinations</p></div>`);
        } else {
          tests.push('<div class="test-section"><h3>‚ùå Fusion System</h3><p>No fusion combinations found</p></div>');
        }
        
        // Test 4: Check base units
        if (BASE_TIER1_UNITS.length > 0) {
          tests.push(`<div class="test-section"><h3>‚úÖ Base Units</h3><p>${BASE_TIER1_UNITS.length} tier 1 units available</p></div>`);
        } else {
          tests.push('<div class="test-section"><h3>‚ùå Base Units</h3><p>No base tier 1 units found</p></div>');
        }
        
        // Test 5: Initialize systems
        const abilitySystem = new AbilitySystem();
        const fusionSystem = new FusionSystem();
        tests.push('<div class="test-section"><h3>‚úÖ System Initialization</h3><p>Ability and Fusion systems initialized</p></div>');
        
        // Test 6: Test unit creation
        if (BASE_TIER1_UNITS.length > 0) {
          const testUnit = fusionSystem.createUnit(BASE_TIER1_UNITS[0]);
          if (testUnit) {
            tests.push(`<div class="test-section"><h3>‚úÖ Unit Creation</h3><p>Successfully created: ${testUnit.name} (${testUnit.attack}/${testUnit.health})</p></div>`);
          } else {
            tests.push('<div class="test-section"><h3>‚ùå Unit Creation</h3><p>Failed to create unit</p></div>');
          }
        }
        
        // Test 7: Test fusion
        if (BASE_TIER1_UNITS.length >= 2) {
          const unit1 = fusionSystem.createUnit(BASE_TIER1_UNITS[0]);
          const unit2 = fusionSystem.createUnit(BASE_TIER1_UNITS[1]);
          const fusionResult = fusionSystem.getFusionResult(unit1, unit2);
          if (fusionResult) {
            tests.push(`<div class="test-section"><h3>‚úÖ Fusion System</h3><p>${unit1.name} + ${unit2.name} = ${fusionResult.name}</p></div>`);
          } else {
            tests.push(`<div class="test-section"><h3>‚ö†Ô∏è Fusion System</h3><p>No fusion result for ${unit1.name} + ${unit2.name}</p></div>`);
          }
        }
        
        // Test 8: Test ability system
        if (BASE_TIER1_UNITS.length > 0) {
          const testUnit = fusionSystem.createUnit(BASE_TIER1_UNITS[0]);
          const unitDef = NEW_UNIT_DEFINITIONS[testUnit.name];
          if (unitDef && unitDef.elements) {
            tests.push(`<div class="test-section"><h3>‚úÖ Ability System</h3><p>Unit ${testUnit.name} has ${unitDef.elements.length} elements: ${unitDef.elements.join(', ')}</p></div>`);
          } else {
            tests.push(`<div class="test-section"><h3>‚ö†Ô∏è Ability System</h3><p>Unit ${testUnit.name} has no elements defined</p></div>`);
          }
        }
        
        // Test 9: Test shop generation
        const mockPlayer = { tier: 1, board: [] };
        const shop = fusionSystem.generateShop(mockPlayer, 3);
        if (shop && shop.length > 0) {
          tests.push(`<div class="test-section"><h3>‚úÖ Shop Generation</h3><p>Generated ${shop.length} shop units</p></div>`);
        } else {
          tests.push('<div class="test-section"><h3>‚ùå Shop Generation</h3><p>Failed to generate shop</p></div>');
        }
        
        // Test 10: Test unit descriptions
        if (BASE_TIER1_UNITS.length > 0) {
          const testUnit = fusionSystem.createUnit(BASE_TIER1_UNITS[0]);
          const description = fusionSystem.getUnitDescription(testUnit);
          tests.push(`<div class="test-section"><h3>‚úÖ Unit Descriptions</h3><p>Description generated: ${description ? 'Yes' : 'No'}</p></div>`);
        }
        
      } catch (error) {
        tests.push(`<div class="test-section"><h3>‚ùå Import Error</h3><p>${error.message}</p></div>`);
      }
      
      // Display results
      results.innerHTML = tests.join('');
    }
    
    runTests();
  </script>
</body>
</html> 